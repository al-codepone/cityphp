<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Paginator</title>
        <meta name="description" content=""/>
        <meta charset="utf-8"/>
        <link type="text/css" rel="stylesheet" href="styles.css"/>
    </head>
    <body>
        <a href="index.html">< Home</a>
        <h2>Paginator</h2>
        <p>The Paginator class only computes the number of pages and the current page number; Paginator does not render any HTML links for you. You use the Paginator constructor to pass in the number of items, items per page and the current page number. Then you can use getNumPages() to get the number of pages and getCurrentPageNum() to get the current page number. getNumPages() will always be greater than or equal to one. getCurrentPageNum() will always be greater than or equal to one and less than or equal to getNumPages(). If the passed in current page number is less than one then getCurrentPageNum() will be equal to one. If the passed in current page number is greater than getNumPages() then getCurrentPageNum() will be equal to getNumPages(). The source code for the examples in this section is available in the sample_applications directory as examples nine and ten.</p>
        <p>Let's do an example to see how the Paginator values are computed. In this example we will instantiate a bunch of paginators and then print out their values. We need two files for this application: constants.php and index.php. Here is constants.php:</p>
        <pre>&lt;?php

define('CITY_PHP', '/somedir/cityphp/');

?&gt;</pre>
        <p>index.php:</p>
        <pre>&lt;?php

require_once('./constants.php');
require_once(CITY_PHP . 'pagination/Paginator.php');

$paginators = array(new Paginator(100, 10, 1),
    new Paginator(100, 10, 20),
    new Paginator(100, 10, -20),
    new Paginator(0, 10, 2));

foreach($paginators as $paginator) {
    printf('numPages = %d, currentPageNum = %d&lt;br/&gt;',
        $paginator-&gt;getNumPages(),
        $paginator-&gt;getCurrentPageNum());
}

?&gt;</pre>
        <p>The output is:</p>
        <pre>numPages = 10, currentPageNum = 1
numPages = 10, currentPageNum = 10
numPages = 10, currentPageNum = 1
numPages = 1, currentPageNum = 1</pre>
        <p>In the next example application we use Paginator to render a set of pagination links. We will instantiate a Paginator object and pass it into a view object. The view object will then render pagination links using the Paginator getNumPages() and getCurrentPageNum() methods. For this example we need to write five files: constants.php, styles.css, PaginationView.php, SingleViewHtmlBody.php and index.php. Here is constants.php:</p>
        <pre>&lt;?php

define('CITY_PHP', '/somedir/cityphp/');
define('EXAMPLE10_PHP', '/somedir/example10php/');
define('ROOT', '/somedir/');
define('CSS', ROOT . 'css/');
define('ITEMS_PER_PAGE', 10);

?&gt;</pre>
        <p>styles.css:</p>
        <pre>.pagination div {
    font-size:2em;
    float:left;
    padding:.5em;
    background-color:#ddedf2;
    border:1px solid #8c8c8c;
    margin-right:.25em;
}

#current {
    background-color:#f9fbfc;
}

#current a {
    text-decoration:none;
}</pre>
        <p>PaginationView.php:</p>
        <pre>&lt;?php

require_once(CITY_PHP . 'IView.php');
require_once(CITY_PHP . 'pagination/Paginator.php');

class PaginationView implements IView {
    private $paginator;

    public function __construct(Paginator $paginator) {
        $this-&gt;paginator = $paginator;
    }

    public function draw() {
        $ob = '&lt;div class="pagination"&gt;';

        for($i = 1; $i &lt;= $this-&gt;paginator-&gt;getNumPages(); ++$i) {
            $isCurrent = ($i == $this-&gt;paginator-&gt;getCurrentPageNum());
            $divId = $isCurrent ? ' id="current"' : '';
            $queryString = ($i != 1) ? '?p=' . $i : '';

            $ob .= sprintf('&lt;div%s&gt;&lt;a href="%s%s"&gt;%d&lt;/a&gt;&lt;/div&gt;',
                $divId, ROOT, $queryString, $i);
        }

        $ob .= '&lt;/div&gt;';
        return $ob;
    }
}

?&gt;</pre>
        <p>SingleViewHtmlBody.php:</p>
        <pre>&lt;?php

require_once(CITY_PHP . 'IView.php');

class SingleViewHtmlBody implements IView {
    private $view;

    public function __construct(IView $view) {
        $this-&gt;view = $view;
    }

    public function draw() {
        return sprintf('&lt;body&gt;%s&lt;/body&gt;', $this-&gt;view-&gt;draw());
    }
}

?&gt;</pre>
        <p>index.php:</p>
        <pre>&lt;?php

require_once('./constants.php');
require_once(CITY_PHP . 'html/HtmlDoc.php');
require_once(CITY_PHP . 'html/HtmlHead.php');
require_once(CITY_PHP . 'pagination/Paginator.php');
require_once(EXAMPLE10_PHP . 'html/PaginationView.php');
require_once(EXAMPLE10_PHP . 'html/SingleViewHtmlBody.php');

$currentPageNum = intval($_GET['p']);
$numItems = 50;
$paginator = new Paginator($numItems, ITEMS_PER_PAGE, $currentPageNum);
$paginationView = new PaginationView($paginator);

$tags = array('&lt;title&gt;Paginator Test&lt;/title&gt;',
    '&lt;meta name="description" content=""/&gt;',
    '&lt;link type="text/css" rel="stylesheet" href="' . CSS . 'styles.css"/&gt;');

$htmlHead = new HtmlHead($tags);
$htmlBody = new SingleViewHtmlBody($paginationView);
$htmlDoc = new HtmlDoc($htmlHead, $htmlBody);
print $htmlDoc-&gt;draw();

?&gt;</pre>
        <p>In the above index.php, we instantiate a Paginator object and we pass it into a PaginationView object. PaginationView uses the Paginator getters in order to render the pagination links. The PaginationView object is passed into an HTML body object. The HTML body object renders the PaginationView object.</p>
        <p>This concludes the Paginator section. There is another Paginator example in /sample_applications/guestbook/.</p>
    </body>
</html>
